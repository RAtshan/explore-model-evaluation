target_default: 4_model_evaluation

packages:
  - dplyr
  - scipiper

sources:
  - code/Metric_fetch.R
  - code/Metrics_process.R
  - code/Metric_visualize.R
  - code/Metric_calculate.R

targets:
  4_model_evaluation:
    depends:
     -

  # general metrics at all, seg, year, month scales
  4_model_evaluation/out/gen_metrics_all_obs.csv:
    command: calc_all_metrics(dat_in = predicted_observed_temps_long_dat)

  4_model_evaluation/out/gen_metrics_by_seg.csv:
    command: calc_all_metrics(predicted_observed_temps_long_dat, grouping = seg_id_nat)

  4_model_evaluation/out/gen_metrics_by_year.csv:
    command: calc_all_metrics(predicted_observed_temps_long_dat, grouping = lubridate::year(date))

  4_model_evaluation/out/gen_metrics_by_month.csv:
    command: calc_all_metrics(predicted_observed_temps_long_dat, grouping = lubridate::month(date))

  # exceedance metrics
  4_model_evaluation/out/exceedance_metrics_all_obs.csv:
    command: calc_exc_metric(predicted_observed_temps_long_dat)

  4_model_evaluation/out/exceedance_metrics_by_seg.csv:
    command: calc_exc_metric(predicted_observed_temps_long_dat, grouping = seg_id_nat)

  4_model_evaluation/out/exceedance_metrics_by_year.csv:
    command: calc_exc_metric(predicted_observed_temps_long_dat, grouping = lubridate::year(date))

  4_model_evaluation/out/exceedance_metrics_by_month.csv:
    command: calc_exc_metric(predicted_observed_temps_long_dat, grouping = lubridate::month(date))

  # max timing and magnitude exceedance_metrics_by_month
  4_model_evaluation/out/max_metrics_by_seg_year.csv:
    command: calc_max_metric(predicted_observed_temps_long_dat)
