target_default: 4_model_evaluation

packages:
  - dplyr
  - scipiper

sources:
  - code/Metric_fetch.R
  - code/Metrics_process.R
  - code/Metric_visualize.R
  - code/Metric_calculate.R

targets:
  4_model_evaluation:
    depends:
     - "4_model_evaluation/out/gen_metrics_all_obs.csv"
     - "4_model_evaluation/out/gen_metrics_by_seg.csv"
     - "4_model_evaluation/out/gen_metrics_by_year.csv"
     - "4_model_evaluation/out/gen_metrics_by_month.csv"
     - "4_model_evaluation/out/exceedance_metrics_all_obs.csv"
     - "4_model_evaluation/out/exceedance_metrics_by_seg.csv"
     - "4_model_evaluation/out/exceedance_metrics_by_year.csv"
     - "4_model_evaluation/out/exceedance_metrics_by_month.csv"
     - "4_model_evaluation/out/max_metrics_by_seg_year.csv"
     

  # general metrics at all, seg, year, month scales
  4_model_evaluation/out/gen_metrics_all_obs.csv:
    command: calc_all_metric(long_dat, grouping = NA)

  4_model_evaluation/out/gen_metrics_by_seg.csv:
    command: calc_all_metric(long_dat, grouping = seg_id_nat)

  4_model_evaluation/out/gen_metrics_by_year.csv:
    command: calc_all_metric(long_dat, grouping = year)

  4_model_evaluation/out/gen_metrics_by_month.csv:
    command: calc_all_metric(long_dat, grouping = month)

  # exceedance metrics
  4_model_evaluation/out/exceedance_metrics_all_obs.csv:
    command: calc_exc_metric(long_dat, grouping = NA)

  4_model_evaluation/out/exceedance_metrics_by_seg.csv:
    command: calc_exc_metric(long_dat, grouping = seg_id_nat)

  4_model_evaluation/out/exceedance_metrics_by_year.csv:
    command: calc_exc_metric(long_dat, grouping = year)

  4_model_evaluation/out/exceedance_metrics_by_month.csv:
    command: calc_exc_metric(long_dat, grouping = month)

  # max timing and magnitude exceedance_metrics_by_month
  4_model_evaluation/out/max_metrics_by_seg_year.csv:
    command: calc_max_metric(long_dat)
